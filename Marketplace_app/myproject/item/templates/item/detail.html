{% extends 'base.html' %}

{% block title %}{% endblock %}

{% block content %}
    <div class="mt-6 px-6 py-12 bg-gray-100 rounded-xl max-w-4xl mx-auto">
        <div class="bg-white p-6 rounded-lg shadow">
            <div class="mb-6">
                <img src="{{ item.image.url }}" alt="{{ item.name }}" class="w-full h-96 object-cover rounded-md">
            </div>
            <h2 class="text-3xl font-bold mb-4">{{ item.name }}</h2>
            <p class="text-gray-700 mb-4">{{ item.description }}</p>
            <p class="text-gray-500 mb-2"><strong>Category:</strong> {{ item.category.name }}</p>
            {% if request.user == item.created_by %}
            <div class="mt-6 p-6 bg-gray-100 rounded-lg shadow">
                <p>This is your item.</p>
                <a href="{% url 'item:edit' item.pk %}" class="inline-block bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition-colors duration-300">Edit</a>

                <a href="{% url 'item:delete' item.pk %}" class="inline-block bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors duration-300">Delete Item</a>
            </div>
            {% else %}
            <p class="text-gray-500 mb-2"><strong>Seller:</strong> {{ item.created_by.username }} <a href="{% url 'conversation:new' item.pk %}" class="text-blue-600 hover:underline">(Contact Seller)</a></p> {% endif %}
            <p class="text-blue-600 font-bold text-xl mb-4">${{ item.price }}</p>
            <a href="#" class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-300">Buy Now</a><a href="{% url 'conversation:new' item.pk %}"  class="inline-block ml-4 bg-teal-300 text-teal-800 px-6 py-3 rounded-lg hover:bg-teal-400 transition-colors duration-300">Contact Seller</a>
        </div>
    </div>
        <div class="mt-6 px-6 py-12 bg-gray-100 rounded-xl">
        <h2 class="mb-12 text-2xl text-center">Related items</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for item in related_items %}
                <div class="bg-white p-4 rounded-lg shadow hover:shadow-lg transition-shadow duration-300">
                    <a href="{% url 'item:detail' item.pk %}">
                        <div>{% if item.image %}<img src="{{ item.image.url }}" alt="{{ item.name }}" class="w-full h-48 object-cover rounded-md mb-4">{% else %}<div class="w-full h-48 bg-gray-200 rounded-md mb-4"><img src="{{ item_images.default.png }}" alt="Placeholder" class="w-full h-48 object-cover rounded-md mb-4"></div>{% endif %}</div>
                        <h3 class="text-lg font-semibold mb-2">{{ item.name }}</h3>
                        <p class="text-gray-600 mb-1">{{ item.description|truncatewords:15 }}</p>
                        <p class="text-blue-600 font-bold">${{ item.price }}</p>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}